import{$ as ee,a as fe,w as pe,e as be}from"./use-resolve-button-type-auTWOyl-.js";import{r as a,R as D}from"./index-COfe_To1.js";import{M as Z,W as U,s as _,y as W,o as E,n as H,H as B,D as te,u as G,a as xe,b as T,t as me}from"./keyboard-By8a-KgL.js";import{a as ge,T as re,s as ve,_ as O,b as q,P as S,F as I}from"./use-is-mounted-DjqXE1YQ.js";function Te({onFocus:e}){let[t,n]=a.useState(!0),r=ge();return t?D.createElement(re,{as:"button",type:"button",features:ve.Focusable,onFocus:l=>{l.preventDefault();let s,u=50;function f(){if(u--<=0){s&&cancelAnimationFrame(s);return}if(e()){if(cancelAnimationFrame(s),!r.current)return;n(!1);return}s=requestAnimationFrame(f)}s=requestAnimationFrame(f)}}):null}const ne=a.createContext(null);function Ie(){return{groups:new Map,get(e,t){var n;let r=this.groups.get(e);r||(r=new Map,this.groups.set(e,r));let l=(n=r.get(t))!=null?n:0;r.set(t,l+1);let s=Array.from(r.keys()).indexOf(t);function u(){let f=r.get(t);f>1?r.set(t,f-1):r.delete(t)}return[s,u]}}}function Pe({children:e}){let t=a.useRef(Ie());return a.createElement(ne.Provider,{value:t},e)}function ae(e){let t=a.useContext(ne);if(!t)throw new Error("You must wrap your component in a <StableCollection>");let n=a.useId(),[r,l]=t.current.get(e,n);return a.useEffect(()=>l,[]),r}var he=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(he||{}),$e=(e=>(e[e.Less=-1]="Less",e[e.Equal=0]="Equal",e[e.Greater=1]="Greater",e))($e||{}),ye=(e=>(e[e.SetSelectedIndex=0]="SetSelectedIndex",e[e.RegisterTab=1]="RegisterTab",e[e.UnregisterTab=2]="UnregisterTab",e[e.RegisterPanel=3]="RegisterPanel",e[e.UnregisterPanel=4]="UnregisterPanel",e))(ye||{});let Ee={0(e,t){var n;let r=O(e.tabs,c=>c.current),l=O(e.panels,c=>c.current),s=r.filter(c=>{var m;return!((m=c.current)!=null&&m.hasAttribute("disabled"))}),u={...e,tabs:r,panels:l};if(t.index<0||t.index>r.length-1){let c=G(Math.sign(t.index-e.selectedIndex),{[-1]:()=>1,0:()=>G(Math.sign(t.index),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0});if(s.length===0)return u;let m=G(c,{0:()=>r.indexOf(s[0]),1:()=>r.indexOf(s[s.length-1])});return{...u,selectedIndex:m===-1?e.selectedIndex:m}}let f=r.slice(0,t.index),P=[...r.slice(t.index),...f].find(c=>s.includes(c));if(!P)return u;let x=(n=r.indexOf(P))!=null?n:e.selectedIndex;return x===-1&&(x=e.selectedIndex),{...u,selectedIndex:x}},1(e,t){if(e.tabs.includes(t.tab))return e;let n=e.tabs[e.selectedIndex],r=O([...e.tabs,t.tab],s=>s.current),l=e.selectedIndex;return e.info.current.isControlled||(l=r.indexOf(n),l===-1&&(l=e.selectedIndex)),{...e,tabs:r,selectedIndex:l}},2(e,t){return{...e,tabs:e.tabs.filter(n=>n!==t.tab)}},3(e,t){return e.panels.includes(t.panel)?e:{...e,panels:O([...e.panels,t.panel],n=>n.current)}},4(e,t){return{...e,panels:e.panels.filter(n=>n!==t.panel)}}},V=a.createContext(null);V.displayName="TabsDataContext";function M(e){let t=a.useContext(V);if(t===null){let n=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,M),n}return t}let j=a.createContext(null);j.displayName="TabsActionsContext";function J(e){let t=a.useContext(j);if(t===null){let n=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,J),n}return t}function we(e,t){return G(t.type,Ee,e,t)}let Ae="div";function Fe(e,t){let{defaultIndex:n=0,vertical:r=!1,manual:l=!1,onChange:s,selectedIndex:u=null,...f}=e;const P=r?"vertical":"horizontal",x=l?"manual":"auto";let c=u!==null,m=_({isControlled:c}),w=W(t),[p,d]=a.useReducer(we,{info:m,selectedIndex:u??n,tabs:[],panels:[]}),k=a.useMemo(()=>({selectedIndex:p.selectedIndex}),[p.selectedIndex]),C=_(s||(()=>{})),$=_(p.tabs),b=a.useMemo(()=>({orientation:P,activation:x,...p}),[P,x,p]),A=E(i=>(d({type:1,tab:i}),()=>d({type:2,tab:i}))),R=E(i=>(d({type:3,panel:i}),()=>d({type:4,panel:i}))),g=E(i=>{v.current!==i&&C.current(i),c||d({type:0,index:i})}),v=_(c?e.selectedIndex:p.selectedIndex),L=a.useMemo(()=>({registerTab:A,registerPanel:R,change:g}),[]);H(()=>{d({type:0,index:u??n})},[u]),H(()=>{if(v.current===void 0||p.tabs.length<=0)return;let i=O(p.tabs,y=>y.current);i.some((y,F)=>p.tabs[F]!==y)&&g(i.indexOf(p.tabs[v.current]))});let z={ref:w};return D.createElement(Pe,null,D.createElement(j.Provider,{value:L},D.createElement(V.Provider,{value:b},b.tabs.length<=0&&D.createElement(Te,{onFocus:()=>{var i,y;for(let F of $.current)if(((i=F.current)==null?void 0:i.tabIndex)===0)return(y=F.current)==null||y.focus(),!0;return!1}}),B({ourProps:z,theirProps:f,slot:k,defaultTag:Ae,name:"Tabs"}))))}let Se="div";function De(e,t){let{orientation:n,selectedIndex:r}=M("Tab.List"),l=W(t),s=a.useMemo(()=>({selectedIndex:r}),[r]);return B({ourProps:{ref:l,role:"tablist","aria-orientation":n},theirProps:e,slot:s,defaultTag:Se,name:"Tabs.List"})}let Me="button";function ke(e,t){var n,r;let l=a.useId(),{id:s=`headlessui-tabs-tab-${l}`,disabled:u=!1,autoFocus:f=!1,...P}=e,{orientation:x,activation:c,selectedIndex:m,tabs:w,panels:p}=M("Tab"),d=J("Tab"),k=M("Tab"),[C,$]=a.useState(null),b=a.useRef(null),A=W(b,t,$);H(()=>d.registerTab(b),[d,b]);let R=ae("tabs"),g=w.indexOf(b);g===-1&&(g=R);let v=g===m,L=E(o=>{var h;let N=o();if(N===q.Success&&c==="auto"){let ce=(h=xe(b))==null?void 0:h.activeElement,X=k.tabs.findIndex(de=>de.current===ce);X!==-1&&d.change(X)}return N}),z=E(o=>{let h=w.map(N=>N.current).filter(Boolean);if(o.key===T.Space||o.key===T.Enter){o.preventDefault(),o.stopPropagation(),d.change(g);return}switch(o.key){case T.Home:case T.PageUp:return o.preventDefault(),o.stopPropagation(),L(()=>S(h,I.First));case T.End:case T.PageDown:return o.preventDefault(),o.stopPropagation(),L(()=>S(h,I.Last))}if(L(()=>G(x,{vertical(){return o.key===T.ArrowUp?S(h,I.Previous|I.WrapAround):o.key===T.ArrowDown?S(h,I.Next|I.WrapAround):q.Error},horizontal(){return o.key===T.ArrowLeft?S(h,I.Previous|I.WrapAround):o.key===T.ArrowRight?S(h,I.Next|I.WrapAround):q.Error}}))===q.Success)return o.preventDefault()}),i=a.useRef(!1),y=E(()=>{var o;i.current||(i.current=!0,(o=b.current)==null||o.focus({preventScroll:!0}),d.change(g),me(()=>{i.current=!1}))}),F=E(o=>{o.preventDefault()}),{isFocusVisible:K,focusProps:se}=ee({autoFocus:f}),{isHovered:Y,hoverProps:le}=fe({isDisabled:u}),{pressed:Q,pressProps:ue}=pe({disabled:u}),oe=a.useMemo(()=>({selected:v,hover:Y,active:Q,focus:K,autofocus:f,disabled:u}),[v,Y,K,Q,f,u]),ie=te({ref:A,onKeyDown:z,onMouseDown:F,onClick:y,id:s,role:"tab",type:be(e,C),"aria-controls":(r=(n=p[g])==null?void 0:n.current)==null?void 0:r.id,"aria-selected":v,tabIndex:v?0:-1,disabled:u||void 0,autoFocus:f},se,le,ue);return B({ourProps:ie,theirProps:P,slot:oe,defaultTag:Me,name:"Tabs.Tab"})}let Ce="div";function Re(e,t){let{selectedIndex:n}=M("Tab.Panels"),r=W(t),l=a.useMemo(()=>({selectedIndex:n}),[n]);return B({ourProps:{ref:r},theirProps:e,slot:l,defaultTag:Ce,name:"Tabs.Panels"})}let Le="div",Oe=Z.RenderStrategy|Z.Static;function Ge(e,t){var n,r,l,s;let u=a.useId(),{id:f=`headlessui-tabs-panel-${u}`,tabIndex:P=0,...x}=e,{selectedIndex:c,tabs:m,panels:w}=M("Tab.Panel"),p=J("Tab.Panel"),d=a.useRef(null),k=W(d,t);H(()=>p.registerPanel(d),[p,d]);let C=ae("panels"),$=w.indexOf(d);$===-1&&($=C);let b=$===c,{isFocusVisible:A,focusProps:R}=ee(),g=a.useMemo(()=>({selected:b,focus:A}),[b,A]),v=te({ref:k,id:f,role:"tabpanel","aria-labelledby":(r=(n=m[$])==null?void 0:n.current)==null?void 0:r.id,tabIndex:b?P:-1},R);return!b&&((l=x.unmount)==null||l)&&!((s=x.static)!=null&&s)?D.createElement(re,{"aria-hidden":"true",...v}):B({ourProps:v,theirProps:x,slot:g,defaultTag:Le,features:Oe,visible:b,name:"Tabs.Panel"})}let Ue=U(ke),We=U(Fe),Be=U(De),Ne=U(Re),_e=U(Ge),je=Object.assign(Ue,{Group:We,List:Be,Panels:Ne,Panel:_e});export{je as u};
